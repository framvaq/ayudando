<app-header-layout></app-header-layout>

<mat-sidenav-container>
  <mat-sidenav #sidenav opened="true">
    <!--

REMEMBER TO DELETE opened="true"

    -->
    <button (click)="sidenav.close()" class="sidenav-menu">
      <mat-icon>close</mat-icon>
      <p>Cerrar</p>
    </button>
    <form [formGroup]="filters">
      <fieldset>
        <legend>Tipo de anuncio</legend>
        <mat-radio-group class="type">
          <mat-radio-button ngDefaultControl formControlName="type" value="ask">Pidiendo ayuda</mat-radio-button>
          <mat-radio-button ngDefaultControl formControlName="type" value="give">Ayudando</mat-radio-button>
        </mat-radio-group>
      </fieldset>

      <fieldset>
        <legend>Fecha</legend>
        <section class="date" formGroupName="date">
          <mat-checkbox ngDefaultControl formControlName="less1week" value="less-1-week"
            >Queda una semana o menos<wbr /> (es esta semana)</mat-checkbox
          >
          <mat-checkbox ngDefaultControl formControlName="less2weeks" value="less-2-weeks"
            >Quedan dos semanas o menos<wbr /> (es la semana que viene)</mat-checkbox
          >
          <mat-checkbox ngDefaultControl formControlName="less1month" value="less-1-month"
            >Queda menos de un mes</mat-checkbox
          >
          <mat-checkbox ngDefaultControl formControlName="more1month" value="more-1-month"
            >Queda más de un mes</mat-checkbox
          >
          <mat-checkbox ngDefaultControl formControlName="notdefined" value="not-defined">Sin definir</mat-checkbox>
        </section>
      </fieldset>

      <fieldset>
        <legend>Lugar</legend>
        <mat-form-field>
          <mat-label>Elige...</mat-label>
          <!-- TODO fix mat-* version & decide which I prefer (like this is more accesible out of the box) -->
          <select matNativeControl formControlName="place">
            <optgroup *ngFor="let community of communities" [label]="community.name">
              <option *ngFor="let province of community.provinces" value="{{ province.value }}">
                {{ province.viewValue }}
              </option>
            </optgroup>
          </select>
        </mat-form-field>
      </fieldset>

      <!-- TODO autocomplete
      <fieldset>
        <legend>Lugar</legend>
        <mat-form-field>
          <mat-label>Elige...</mat-label>
          <input
            type="text"
            matInput
            formControlName="place"
            placeholder="Regiones ordenadas alfabéticamente"
            [matAutocomplete]="autoGroup"
          />
          <mat-autocomplete #autoGroup="matAutocomplete">
            <mat-optgroup *ngFor="let community of communities" [label]="community.name">
              <mat-option
                *ngFor="let province of community.provinces"
                value="{{ province.value }}"
                id="provinceSelected"
              >
                {{ province.viewValue }}
              </mat-option>
            </mat-optgroup>
          </mat-autocomplete>
        </mat-form-field>
      </fieldset>
-->

      <fieldset>
        <legend>Palabra clave</legend>
        <mat-form-field>
          <mat-label>
            Escribe una palabra que defina el favor
          </mat-label>
          <input matInput type="text" formControlName="word" placeholder="recados, terapia..." class="full-width" />
        </mat-form-field>
      </fieldset>

      <fieldset>
        <legend>Número de anuncios</legend>
        <mat-slider formControlName="number" min="0" max="10" step="1" thumbLabel tickInterval="1"></mat-slider>
      </fieldset>

      <br />
      <button mat-raised-button (click)="submit(); sidenav.close()"><mat-icon>done</mat-icon>Aplicar filtros</button>
    </form>
  </mat-sidenav>

  <mat-sidenav-content>
    <button (click)="sidenav.open()" class="sidenav-menu">
      <mat-icon>filter_alt</mat-icon>
      <p>Filtrar</p>
    </button>
    <section class="announcements">
      <br />
      <h3>Get announcements</h3>
      <div *ngFor="let announce of announcements">
        {{ announce | json }}
        <p>Announce.id = {{ announce.id }}</p>
      </div>
      <hr />

      <hr />

      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
    </section>
  </mat-sidenav-content>
</mat-sidenav-container>
